<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bagendit Ticketing | <%= title %>
  </title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous" />
  <!-- Fontawesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
    integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

  <script src="https://www.koolchart.com/demo/LicenseKey/KoolChartLicense.js"></script>
  <script src="https://www.koolchart.com/demo/KoolChart/JS/KoolChart.js"></script>
  <link rel="stylesheet" href="https://www.koolchart.com/demo/KoolChart/Assets/Css/KoolChart.css" />
</head>

<body>
  <nav class="navbar navbar-expand-lg sticky-top shadow bg-info">
    <div class="container">
      <a class="navbar-brand" href="#"><i class="fa fa-ticket me-2"
          style="transform: rotate(-30deg) scale(1.2);"></i>Bagendit Ticketing</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link <%= (title == 'Home') ? 'active' : '' %>" aria-current="page" href="/dashboard"><i
                class="fa fa-tachometer-alt me-2"></i>Dashboard</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle <%= (title == 'Home') ? 'active' : '' %> " href="#" id="navbarDropdown"
              role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fa fa-table me-2"></i>Master Data
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
              <li><a class="dropdown-item" href="#"><i class="fa fa-ticket-alt me-2"></i>Tiket</a></li>
              <li><a class="dropdown-item" href="#"><i class="fa fa-ticket me-2"></i>Jenis Tiket</a></li>
              <li><a class="dropdown-item" href="#"><i class="fa fa-store-alt me-2"></i>Loket</a></li>
              <li><a class="dropdown-item" href="#"><i class="fa fa-umbrella-beach me-2"></i>Objek Wisata</a></li>
              <li><a class="dropdown-item" href="#"><i class="fa fa-users me-2"></i>Users</a></li>
            </ul>
          </li>

          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle <%= (title == 'Home') ? 'active' : '' %> " href="#" id="navbarDropdown"
              role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fa fa-hand-holding-usd me-2"></i>Transaksi
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
              <li><a class="dropdown-item" href="#"><i class="fa fa-money-bill-trend-up me-2"></i>Daftar Transaksi</a>
              </li>
              <li><a class="dropdown-item" href="#"><i class="fa fa-money-check-dollar me-2"></i>Daftar Pemesanan
                  Tiket</a></li>
            </ul>
          </li>
        </ul>
        <div class="collapse navbar-collapse d-flex justify-content-end" id="navbarNav">
          <ul class="navbar-nav">

            <li class="nav-item dropdown ">
              <a class="nav-link dropdown-toggle <%= (title == 'Home') ? 'active' : '' %> " href="#" id="navbarDropdown"
                role="button" data-bs-toggle="dropdown" aria-expanded="false">
                </i>Ackerman07 | Administrator
              </a>
              <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                <li><a class="dropdown-item" href="#"><i class="fa fa-user-circle me-2"></i>Profil</a></li>
                <li>
                  <hr class="dropdown-divider">
                </li>
                <li><a class="dropdown-item" href="#"><i class="fa fa-sign-out me-2"></i>Logout</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </nav>
  <div class="container mt-5">
    <h3 class="my-4"> <i class="fa fa-angle-double-right me-2"></i> <i class="fa fa-map-location-dot me-2"></i>Jumlah
      Pengunjung Berdasarkan Daerah Asal</h3>
    <div class="p-3 mt-3 ms-5 card shadow rounded-4"
      style="margin-bottom: 5em;width: 70%;background:#f3e2cc">
      <canvas id="canvas" style="padding:0em"></canvas>
    </div>
    <h3 class="my-4"> <i class="fa fa-angle-double-right me-2"></i> <i
        class="fa fa-money-bill-trend-up me-2"></i>Penghasilan Perminggu</h3>
    <div class="p-3 mt-3 ms-5 card shadow rounded-4" style="margin-bottom: 5em;width: 70%;background:white">
      <canvas id="canvas1"></canvas>
    </div>

    <h3 class="my-4"> <i class="fa fa-angle-double-right me-2"></i> <i class="fa fa-ticket me-2"
        style="transform: rotate(-30deg)"></i>Jumlah Tiket Terjual Perminggu</h3>
    <div class="p-3 mt-3 ms-5 card shadow rounded-4"
      style="margin-bottom: 5em;width: 70%;background:rgba(171, 205, 239, 0)">
      <canvas id="canvas2"></canvas>
    </div>

    <h3 class="my-4"> <i class="fa fa-angle-double-right me-2"></i> <i class="fa fa-umbrella-beach me-2"></i>Tempat
      Terfavorit (Pengunjung Terbanyak)</h3>
    <div class="p-3 mt-3 ms-5 card shadow rounded-4"
      style="margin-bottom: 5em;width: 70%;background:rgba(171, 205, 239, 0)">
      <div id="chartHolder" style="width:100%; height:500px;"></div>
    </div>

  </div>
  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous">
  </script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-geo@3.8.0/build/index.umd.min.js"></script>

  <script>
    var values = [
      ['Nusa Tenggara Timur', 16],
      ['Bengkulu', 22],
      ['Maluku Utara', 18],
      ['Sulawesi Barat', 21],
      ['Sumatera Barat', 13],
      ['Banten', 21],
      ['Kepulauan Riau', 18],
      ['Nusa Tenggara Barat', 25],
      ['Sulawesi Utara', 27],
      ['Sulawesi Tengah', 24],
      ['Irian Jaya Barat', 20],
      ['Sulawesi Tenggara', 14],
      ['Bangka-Belitung', 24],
      ['Bali', 19],
    ]



    const country = fetch(
      './js/asia.json'
    ).then((r) => r.json());
    const states = fetch(
      './js/indonesia.json'
    ).then((r) => r.json());


    Promise.all([states, country]).then((data) => {

      const regions = ChartGeo.topojson
        .feature(data[0], data[0].objects.layer).features
      const countries = ChartGeo.topojson.feature(data[1], data[1].objects.continent_Asia_subunits).features;
      const Indonesia = countries.find((d) => d.properties.geounit === 'Indonesia');

      let dataValues = regions.map((d, i) => {
        let data = {}
        for (let i = 0; i < regions.length; i++) {
          data.feature = d
          data.value = 0
          for (let j = 0; j < values.length; j++) {
            if (values[j][0] === d.properties.name) {
              data.feature = d
              data.value = values[j][1]
            }
          }
        }

        return data
      })

      const chart = new Chart(document.getElementById('canvas').getContext('2d'), {
        type: 'choropleth',
        data: {
          labels: regions.map(e => e.properties.name),
          datasets: [{
            label: 'Countries',
            outline: Indonesia,
            data: dataValues,
            borderColor: 'rgba(0,0,0, 0.5)',
          }, ],
        },
        options: {
          responsive: true,
          showOutline: false,
          showGraticule: false,
          scales: {
            x: {
              backgroundColors: '#00FF00',
              interpolate: 'warm',
              color: 'black',
            }
          },
          plugins: {
            legend: {
              display: false,
            },
          },
          scales: {
            xy: {
              projection: 'mercator',
            },
          },
        },
      });
    });
  </script>

  <script>
    const data = {
      labels: ['Week 17', 'Week 18', 'Week 19', 'Week 20', 'Week 21', 'Week 22', 'Week 23'],
      datasets: [{
        label: false,
        data: [
          1615591,
          29927228,
          22267812,
          25239187,
          21146199,
          25209947,
          14804405,
        ],
        borderColor: 'rgba(171, 205, 239, 0.662)',
        backgroundColor: '#068fff',
        pointStyle: 'circle',
        pointRadius: 10,
        pointHoverRadius: 15
      }]
    };
    const config = {
      type: 'line',
      data: data,
      options: {
        responsive: true,
        plugins: {
          legend: {
            display: false
          },
          title: {
            // display: true,
            // text: 'Penghasilan Perminggu',
            font: {
              size: 16,
              weight: 'bold'
            }
          },
        },
        scales: {
          x: {
            title: {
              display: true,
              text: 'Minggu',
              font: {
                size: 14,
                weight: 'bold'
              }
            },
            grid: {
              color: '#d8396e',
              borderColor: 'grey',
              tickColor: 'grey'
            }
          },
          y: {
            title: {
              display: true,
              text: 'Penghasilan (Rp)',
              font: {
                size: 14,
                weight: 'bold'
              }
            }
          }
        }
      }
    };

    const ctx = document.getElementById('canvas1').getContext('2d');
    const myChart = new Chart(ctx, config);






    const data2 = {
      labels: ['Week 17', 'Week 18', 'Week 19', 'Week 20', 'Week 21', 'Week 22', 'Week 23'],
      datasets: [{
          label: false,
          data: [
            49,
            645,
            801,
            535,
            432,
            580,
            310,
          ],
          label: 'Anak-anak',
          backgroundColor: 'rgba(224, 235, 9, 0.6)',
        },
        {
          label: false,
          data: [
            32,
            777,
            645,
            872,
            625,
            687,
            696,
          ],
          label: 'Dewasa',
          backgroundColor: 'rgba(6, 143, 255, 0.6)',
        },
        {
          label: false,
          data: [
            49,
            577,
            561,
            490,
            454,
            572,
            501,
          ],
          label: 'Eksklusif',
          backgroundColor: 'rgba(181, 11, 248, 0.6)',
        },
      ]
    };
    const config2 = {
      type: 'bar',
      data: data2,
      options: {
        responsive: true,
        plugins: {
          legend: {
            title: {
              display: true,
              text: 'Jenis Tiket',
              font: {
                size: 14,
                weight: 'bold'
              }
            }
          },
          title: {
            // display: true,
            // text: 'Penghasilan Perminggu',
            font: {
              size: 16,
              weight: 'bold'
            }
          },
        },
        scales: {
          x: {
            title: {
              display: true,
              text: 'Minggu',
              font: {
                size: 14,
                weight: 'bold'
              }
            },
            grid: {
              color: '#d8396e',
              borderColor: 'grey',
              tickColor: 'grey'
            }
          },
          y: {
            title: {
              display: true,
              text: 'Tiket Terjual (pcs)',
              font: {
                size: 14,
                weight: 'bold'
              }
            }
          }
        }
      }
    };

    const ctx2 = document.getElementById('canvas2').getContext('2d');
    const myChart2 = new Chart(ctx2, config2);
    //   fetch('./js/datamaps.idn.min.json').then((r) => r.json()).then((idn) => {
    //   const nation = ChartGeo.topojson.feature(idn, idn.objects.nation).features[0];
    //   const states = ChartGeo.topojson.feature(idn, idn.objects.states).features;
    // console.log(nation);
    // console.log(states);
    //   const chart = new Chart(document.getElementById("canvas").getContext("2d"), {
    //     type: 'choropleth',
    //     data: {
    //       labels: states.map((d) => d.properties.name),
    //       datasets: [{
    //         label: 'States',
    //         outline: nation,
    //         data: states.map((d) => ({feature: d, value: Math.random() * 10})),
    //       }]
    //     },
    //     options: {
    //       plugins: {
    //         legend: {
    //           display: false
    //         },
    //       },
    //       scales: {
    //         xy: {
    //           projection: 'albersUsa'
    //         },
    //         color: {
    //           quantize: 5,
    //           legend: {
    //             position: 'bottom-right',
    //             align: 'bottom'
    //           },
    //         }
    //       },
    //     }
    //   });
    // });
  </script>

  <script>
    var chartVars = "KoolOnLoadCallFunction=chartReadyHandler";

    KoolChart.create("chart1", "chartHolder", chartVars, "100%", "100%");

    function chartReadyHandler(id) {
      document.getElementById(id).setLayout(layoutStr);
      document.getElementById(id).setData(chartData);
    }

    var layoutStr =
      `<KoolChart backgroundColor="#FFFFFF"  borderThickness="1" borderStyle="none">
		<Options>
			<Legend />
		</Options>
		<NumberFormatter id="numFmt" precision="0"/>
		<Bump2DChart showDataTips="true" dataTipDisplayMode="axis" endPointDisplayName="true" startPointDisplayName="true">
			<horizontalAxis>
				<CategoryAxis categoryField="Week"/>
			</horizontalAxis>
			<verticalAxis>
				<LinearAxis/>
			</verticalAxis>
			<series>
				<Bump2DSeries id="bump1" yField="mesjid al-ahzar" displayName="mesjid al-ahzar" itemRenderer="CircleItemRenderer" labelPosition="inside" form="curve">
					<showDataEffect>
						
            <SeriesClip duration="1000"/>
					</showDataEffect>
				</Bump2DSeries>
				<Bump2DSeries id="bump2" yField="kantin bagendit" displayName="kantin bagendit" itemRenderer="CircleItemRenderer" labelPosition="inside" form="curve">
					<showDataEffect>
						
            <SeriesClip duration="1000"/>
					</showDataEffect>
				</Bump2DSeries>
				<Bump2DSeries id="bump3" yField="bagendit store" displayName="bagendit store" itemRenderer="CircleItemRenderer" labelPosition="inside" form="curve">
					<showDataEffect>
						
            <SeriesClip duration="1000"/>
					</showDataEffect>
				</Bump2DSeries>
				<Bump2DSeries id="bump1" yField="taman main anak" displayName="taman main anak" itemRenderer="CircleItemRenderer" labelPosition="inside" form="curve">
					<showDataEffect>
						
            <SeriesClip duration="1000"/>
					</showDataEffect>
				</Bump2DSeries>
				<Bump2DSeries id="bump2" yField="photo spots" displayName="photo spots" itemRenderer="CircleItemRenderer" labelPosition="inside" form="curve">
					<showDataEffect>
						
            <SeriesClip duration="1000"/>
					</showDataEffect>
				</Bump2DSeries>
				<Bump2DSeries id="bump3" yField="taman anggrek" displayName="taman anggrek" itemRenderer="CircleItemRenderer" labelPosition="inside" form="curve">
					<showDataEffect>
						
            <SeriesClip duration="1000"/>
					</showDataEffect>
				</Bump2DSeries>
				<Bump2DSeries id="bump1" yField="sport area" displayName="sport area" itemRenderer="CircleItemRenderer" labelPosition="inside" form="curve">
					<showDataEffect>
						
            <SeriesClip duration="1000"/>
					</showDataEffect>
				</Bump2DSeries>
				<Bump2DSeries id="bump2" yField="danau eceng" displayName="danau eceng" itemRenderer="CircleItemRenderer" labelPosition="inside" form="curve">
					<showDataEffect>
						
            <SeriesClip duration="1000"/>
					</showDataEffect>
				</Bump2DSeries>
				<Bump2DSeries id="bump3" yField="jelajah danau" displayName="jelajah danau" itemRenderer="CircleItemRenderer" labelPosition="inside" form="curve">
					<showDataEffect>
						
            <SeriesClip duration="1000"/>
					</showDataEffect>
				</Bump2DSeries>
				<Bump2DSeries id="bump3" yField="wisata alam bagendit" displayName="wisata alam bagendit" itemRenderer="CircleItemRenderer" labelPosition="inside" form="curve">
					<showDataEffect>
						
            <SeriesClip duration="1000"/>
					</showDataEffect>
				</Bump2DSeries>
			</series>
			<annotationElements>
				<CrossRangeZoomer enableZooming="false" horizontalLabelFormatter="{numFmt}" horizontalStrokeEnable="false"/>
			</annotationElements>
		</Bump2DChart>
	</KoolChart>`

    var chartData = [{
        "Week": "Week 17",
        'mesjid al-ahzar': 130,
        'kantin bagendit': 130,
        'bagendit store': 130,
        'taman main anak': 130,
        'photo spots': 81,
        'taman anggrek': 81,
        'sport area': 81,
        'danau eceng': 49,
        'jelajah danau': 49,
        'wisata alam bagendit': 49,
      },
      {
        "Week": "Week 18",
        'mesjid al-ahzar': 1999,
        'kantin bagendit': 1999,
        'bagendit store': 1999,
        'taman main anak': 1999,
        'photo spots': 1354,
        'taman anggrek': 1354,
        'sport area': 1354,
        'danau eceng': 577,
        'jelajah danau': 577,
        'wisata alam bagendit': 577,
      },
      {
        "Week": "Week 19",
        'mesjid al-ahzar': 2007,
        'kantin bagendit': 2007,
        'bagendit store': 2007,
        'taman main anak': 2007,
        'photo spots': 1206,
        'taman anggrek': 1206,
        'sport area': 1206,
        'danau eceng': 561,
        'jelajah danau': 561,
        'wisata alam bagendit': 561,
      },
      {
        "Week": "Week 20",
        'mesjid al-ahzar': 1897,
        'kantin bagendit': 1897,
        'bagendit store': 1897,
        'taman main anak': 1897,
        'photo spots': 1362,
        'taman anggrek': 1362,
        'sport area': 1362,
        'danau eceng': 490,
        'jelajah danau': 490,
        'wisata alam bagendit': 490,
      },
      {
        "Week": "Week 21",
        'mesjid al-ahzar': 1511,
        'kantin bagendit': 1511,
        'bagendit store': 1511,
        'taman main anak': 1511,
        'photo spots': 1079,
        'taman anggrek': 1079,
        'sport area': 1079,
        'danau eceng': 454,
        'jelajah danau': 454,
        'wisata alam bagendit': 454,
      },
      {
        "Week": "Week 22",
        'mesjid al-ahzar': 1839,
        'kantin bagendit': 1839,
        'bagendit store': 1839,
        'taman main anak': 1839,
        'photo spots': 1259,
        'taman anggrek': 1259,
        'sport area': 1259,
        'danau eceng': 572,
        'jelajah danau': 572,
        'wisata alam bagendit': 572,
      },
      {
        "Week": "Week 23",
        'mesjid al-ahzar': 1507,
        'kantin bagendit': 1507,
        'bagendit store': 1507,
        'taman main anak': 1507,
        'photo spots': 1197,
        'taman anggrek': 1197,
        'sport area': 1197,
        'danau eceng': 501,
        'jelajah danau': 501,
        'wisata alam bagendit': 501,
      },
    ];
  </script>
</body>

</html>